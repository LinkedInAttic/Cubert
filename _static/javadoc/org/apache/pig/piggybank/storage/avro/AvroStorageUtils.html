<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_20) on Tue Sep 30 14:33:11 PDT 2014 -->
<title>AvroStorageUtils (cubert 0.1.0 API)</title>
<meta name="date" content="2014-09-30">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AvroStorageUtils (cubert 0.1.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9,"i18":9,"i19":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageLog.html" title="class in org.apache.pig.piggybank.storage.avro"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/pig/piggybank/storage/avro/PigAvroDatumReader.html" title="class in org.apache.pig.piggybank.storage.avro"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html" target="_top">Frames</a></li>
<li><a href="AvroStorageUtils.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.pig.piggybank.storage.avro</div>
<h2 title="Class AvroStorageUtils" class="title">Class AvroStorageUtils</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.pig.piggybank.storage.avro.AvroStorageUtils</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">AvroStorageUtils</span>
extends java.lang.Object</pre>
<div class="block">This is utility class for this package</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#BooleanSchema">BooleanSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#BytesSchema">BytesSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#DoubleSchema">DoubleSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#FloatSchema">FloatSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#IntSchema">IntSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#LongSchema">LongSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#NullSchema">NullSchema</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.hadoop.fs.PathFilter</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#PATH_FILTER">PATH_FILTER</a></span></code>
<div class="block">ignore hdfs files with prefix "_" and "."</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#StringSchema">StringSchema</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#AvroStorageUtils--">AvroStorageUtils</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsGenericUnion-org.apache.avro.Schema-">containsGenericUnion</a></span>(org.apache.avro.Schema&nbsp;s)</code>
<div class="block">determine whether the input schema contains generic unions</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsGenericUnion-org.apache.avro.Schema-java.util.Set-">containsGenericUnion</a></span>(org.apache.avro.Schema&nbsp;s,
                    java.util.Set&lt;org.apache.avro.Schema&gt;&nbsp;visitedRecords)</code>
<div class="block">Called by <a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsGenericUnion-org.apache.avro.Schema-"><code>containsGenericUnion(Schema)</code></a> and it recursively checks
 whether the input schema contains generic unions.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsRecursiveRecord-org.apache.avro.Schema-">containsRecursiveRecord</a></span>(org.apache.avro.Schema&nbsp;s)</code>
<div class="block">determine whether the input schema contains recursive records</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsRecursiveRecord-org.apache.avro.Schema-java.util.Set-">containsRecursiveRecord</a></span>(org.apache.avro.Schema&nbsp;s,
                       java.util.Set&lt;java.lang.String&gt;&nbsp;definedRecordNames)</code>
<div class="block">Called by <a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsRecursiveRecord-org.apache.avro.Schema-"><code>containsRecursiveRecord(Schema)</code></a> and it recursively checks
 whether the input schema contains recursive records.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema.Field</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#createUDField-int-org.apache.avro.Schema-">createUDField</a></span>(int&nbsp;index,
             org.apache.avro.Schema&nbsp;s)</code>
<div class="block">create  an avro field using the given schema</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#createUDPartialRecordSchema--">createUDPartialRecordSchema</a></span>()</code>
<div class="block">create an avro field with null schema (it is a space holder)</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getAcceptedType-org.apache.avro.Schema-">getAcceptedType</a></span>(org.apache.avro.Schema&nbsp;in)</code>
<div class="block">extract schema from a nullable union</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static java.util.Set&lt;org.apache.hadoop.fs.Path&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getAllFilesRecursively-java.util.Set-org.apache.hadoop.conf.Configuration-">getAllFilesRecursively</a></span>(java.util.Set&lt;org.apache.hadoop.fs.Path&gt;&nbsp;basePaths,
                      org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">Returns all non-hidden files recursively inside the base paths given</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static org.apache.hadoop.fs.Path</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getLast-org.apache.hadoop.fs.Path-org.apache.hadoop.fs.FileSystem-">getLast</a></span>(org.apache.hadoop.fs.Path&nbsp;path,
       org.apache.hadoop.fs.FileSystem&nbsp;fs)</code>
<div class="block">get last file of a hdfs path if it is  a directory;
   or return the file itself if path is a file</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static java.util.Set&lt;org.apache.hadoop.fs.Path&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getPaths-java.lang.String-org.apache.hadoop.conf.Configuration-boolean-">getPaths</a></span>(java.lang.String&nbsp;pathString,
        org.apache.hadoop.conf.Configuration&nbsp;conf,
        boolean&nbsp;failIfNotFound)</code>
<div class="block">Gets the list of paths from the pathString specified which may contain
 comma-separated paths and glob style path</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getSchema-org.apache.hadoop.fs.Path-org.apache.hadoop.fs.FileSystem-">getSchema</a></span>(org.apache.hadoop.fs.Path&nbsp;path,
         org.apache.hadoop.fs.FileSystem&nbsp;fs)</code>
<div class="block">This method is called by <code>#getAvroSchema</code>.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;org.apache.hadoop.fs.Path,java.util.Map&lt;java.lang.Integer,java.lang.Integer&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getSchemaToMergedSchemaMap-org.apache.avro.Schema-java.util.Map-">getSchemaToMergedSchemaMap</a></span>(org.apache.avro.Schema&nbsp;mergedSchema,
                          java.util.Map&lt;org.apache.hadoop.fs.Path,org.apache.avro.Schema&gt;&nbsp;mergedFiles)</code>
<div class="block">When merging multiple avro record schemas, we build a map (schemaToMergedSchemaMap)
 to associate each input record with a remapping of its fields relative to the merged
 schema.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema.Field</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#getUDField-org.apache.avro.Schema-int-">getUDField</a></span>(org.apache.avro.Schema&nbsp;s,
          int&nbsp;index)</code>
<div class="block">get field schema given index number</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#isAcceptableUnion-org.apache.avro.Schema-">isAcceptableUnion</a></span>(org.apache.avro.Schema&nbsp;in)</code>
<div class="block">determine whether a union is a nullable union;
 note that this function doesn't check containing
 types of the input union recursively.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#isTupleWrapper-org.apache.pig.ResourceSchema.ResourceFieldSchema-">isTupleWrapper</a></span>(org.apache.pig.ResourceSchema.ResourceFieldSchema&nbsp;pigSchema)</code>
<div class="block">check whether it is just a wrapped tuple</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#isUDPartialRecordSchema-org.apache.avro.Schema-">isUDPartialRecordSchema</a></span>(org.apache.avro.Schema&nbsp;s)</code>
<div class="block">check whether a schema is a space holder (using field name)</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#mergeSchema-org.apache.avro.Schema-org.apache.avro.Schema-">mergeSchema</a></span>(org.apache.avro.Schema&nbsp;x,
           org.apache.avro.Schema&nbsp;y)</code>
<div class="block">This method merges two avro schemas into one.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#noDir-org.apache.hadoop.fs.FileStatus:A-">noDir</a></span>(org.apache.hadoop.fs.FileStatus[]&nbsp;ss)</code>
<div class="block">check whether there is NO directory in the input file (status) list</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static org.apache.pig.ResourceSchema.ResourceFieldSchema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#wrapAsTuple-org.apache.pig.ResourceSchema.ResourceFieldSchema-">wrapAsTuple</a></span>(org.apache.pig.ResourceSchema.ResourceFieldSchema&nbsp;subFieldSchema)</code>
<div class="block">wrap a pig schema as tuple</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>static org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#wrapAsUnion-org.apache.avro.Schema-boolean-">wrapAsUnion</a></span>(org.apache.avro.Schema&nbsp;schema,
           boolean&nbsp;nullable)</code>
<div class="block">Wrap an avro schema as a nullable union if needed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BooleanSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BooleanSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema BooleanSchema</pre>
</li>
</ul>
<a name="LongSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LongSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema LongSchema</pre>
</li>
</ul>
<a name="FloatSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FloatSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema FloatSchema</pre>
</li>
</ul>
<a name="DoubleSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DoubleSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema DoubleSchema</pre>
</li>
</ul>
<a name="IntSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IntSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema IntSchema</pre>
</li>
</ul>
<a name="StringSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>StringSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema StringSchema</pre>
</li>
</ul>
<a name="BytesSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BytesSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema BytesSchema</pre>
</li>
</ul>
<a name="NullSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NullSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema NullSchema</pre>
</li>
</ul>
<a name="PATH_FILTER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PATH_FILTER</h4>
<pre>public static&nbsp;org.apache.hadoop.fs.PathFilter PATH_FILTER</pre>
<div class="block">ignore hdfs files with prefix "_" and "."</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AvroStorageUtils--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AvroStorageUtils</h4>
<pre>public&nbsp;AvroStorageUtils()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createUDField-int-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createUDField</h4>
<pre>public static&nbsp;org.apache.avro.Schema.Field&nbsp;createUDField(int&nbsp;index,
                                                         org.apache.avro.Schema&nbsp;s)</pre>
<div class="block">create  an avro field using the given schema</div>
</li>
</ul>
<a name="createUDPartialRecordSchema--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createUDPartialRecordSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema&nbsp;createUDPartialRecordSchema()</pre>
<div class="block">create an avro field with null schema (it is a space holder)</div>
</li>
</ul>
<a name="isUDPartialRecordSchema-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUDPartialRecordSchema</h4>
<pre>public static&nbsp;boolean&nbsp;isUDPartialRecordSchema(org.apache.avro.Schema&nbsp;s)</pre>
<div class="block">check whether a schema is a space holder (using field name)</div>
</li>
</ul>
<a name="getUDField-org.apache.avro.Schema-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUDField</h4>
<pre>public static&nbsp;org.apache.avro.Schema.Field&nbsp;getUDField(org.apache.avro.Schema&nbsp;s,
                                                      int&nbsp;index)</pre>
<div class="block">get field schema given index number</div>
</li>
</ul>
<a name="getPaths-java.lang.String-org.apache.hadoop.conf.Configuration-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPaths</h4>
<pre>public static&nbsp;java.util.Set&lt;org.apache.hadoop.fs.Path&gt;&nbsp;getPaths(java.lang.String&nbsp;pathString,
                                                                org.apache.hadoop.conf.Configuration&nbsp;conf,
                                                                boolean&nbsp;failIfNotFound)
                                                         throws java.io.IOException</pre>
<div class="block">Gets the list of paths from the pathString specified which may contain
 comma-separated paths and glob style path</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getAllFilesRecursively-java.util.Set-org.apache.hadoop.conf.Configuration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllFilesRecursively</h4>
<pre>public static&nbsp;java.util.Set&lt;org.apache.hadoop.fs.Path&gt;&nbsp;getAllFilesRecursively(java.util.Set&lt;org.apache.hadoop.fs.Path&gt;&nbsp;basePaths,
                                                                              org.apache.hadoop.conf.Configuration&nbsp;conf)
                                                                       throws java.io.IOException</pre>
<div class="block">Returns all non-hidden files recursively inside the base paths given</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="noDir-org.apache.hadoop.fs.FileStatus:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noDir</h4>
<pre>public static&nbsp;boolean&nbsp;noDir(org.apache.hadoop.fs.FileStatus[]&nbsp;ss)</pre>
<div class="block">check whether there is NO directory in the input file (status) list</div>
</li>
</ul>
<a name="getLast-org.apache.hadoop.fs.Path-org.apache.hadoop.fs.FileSystem-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLast</h4>
<pre>public static&nbsp;org.apache.hadoop.fs.Path&nbsp;getLast(org.apache.hadoop.fs.Path&nbsp;path,
                                                org.apache.hadoop.fs.FileSystem&nbsp;fs)
                                         throws java.io.IOException</pre>
<div class="block">get last file of a hdfs path if it is  a directory;
   or return the file itself if path is a file</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="mergeSchema-org.apache.avro.Schema-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema&nbsp;mergeSchema(org.apache.avro.Schema&nbsp;x,
                                                 org.apache.avro.Schema&nbsp;y)
                                          throws java.io.IOException</pre>
<div class="block">This method merges two avro schemas into one. Note that not every avro schema
 can be merged. For complex types to be merged, they must be the same type.
 For primitive types to be merged, they must meet certain conditions. For
 schemas that cannot be merged, an exception is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - first avro schema to merge</dd>
<dd><code>y</code> - second avro schema to merge</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>merged avro schema</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getSchemaToMergedSchemaMap-org.apache.avro.Schema-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSchemaToMergedSchemaMap</h4>
<pre>public static&nbsp;java.util.Map&lt;org.apache.hadoop.fs.Path,java.util.Map&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&nbsp;getSchemaToMergedSchemaMap(org.apache.avro.Schema&nbsp;mergedSchema,
                                                                                                                                     java.util.Map&lt;org.apache.hadoop.fs.Path,org.apache.avro.Schema&gt;&nbsp;mergedFiles)
                                                                                                                              throws java.io.IOException</pre>
<div class="block">When merging multiple avro record schemas, we build a map (schemaToMergedSchemaMap)
 to associate each input record with a remapping of its fields relative to the merged
 schema. Take the following two schemas for example:

 // path1
 { "type": "record",
   "name": "x",
   "fields": [ { "name": "xField", "type": "string" } ]
 }

 // path2
 { "type": "record",
   "name": "y",
   "fields": [ { "name": "yField", "type": "string" } ]
 }

 The merged schema will be something like this:

 // merged
 { "type": "record",
   "name": "merged",
   "fields": [ { "name": "xField", "type": "string" },
               { "name": "yField", "type": "string" } ]
 }

 The schemaToMergedSchemaMap will look like this:

 // schemaToMergedSchemaMap
 { path1 : { 0 : 0 },
   path2 : { 0 : 1 }
 }

 The meaning of the map is:
 - The field at index '0' of 'path1' is moved to index '0' in merged schema.
 - The field at index '0' of 'path2' is moved to index '1' in merged schema.

 With this map, we can now remap the field position of the original schema to
 that of the merged schema. This is necessary because in the backend, we don't
 use the merged avro schema but embedded avro schemas of input files to load
 them. Therefore, we must relocate each field from old positions in the original
 schema to new positions in the merged schema.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mergedSchema</code> - new schema generated from multiple input schemas</dd>
<dd><code>mergedFiles</code> - input avro files that are merged</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>schemaToMergedSchemaMap that maps old position of each field in the
 original schema to new position in the new schema</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="wrapAsUnion-org.apache.avro.Schema-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrapAsUnion</h4>
<pre>public static&nbsp;org.apache.avro.Schema&nbsp;wrapAsUnion(org.apache.avro.Schema&nbsp;schema,
                                                 boolean&nbsp;nullable)</pre>
<div class="block">Wrap an avro schema as a nullable union if needed.
 For instance, wrap schema "int" as ["null", "int"]</div>
</li>
</ul>
<a name="containsRecursiveRecord-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsRecursiveRecord</h4>
<pre>public static&nbsp;boolean&nbsp;containsRecursiveRecord(org.apache.avro.Schema&nbsp;s)</pre>
<div class="block">determine whether the input schema contains recursive records</div>
</li>
</ul>
<a name="containsRecursiveRecord-org.apache.avro.Schema-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsRecursiveRecord</h4>
<pre>protected static&nbsp;boolean&nbsp;containsRecursiveRecord(org.apache.avro.Schema&nbsp;s,
                                                 java.util.Set&lt;java.lang.String&gt;&nbsp;definedRecordNames)</pre>
<div class="block">Called by <a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsRecursiveRecord-org.apache.avro.Schema-"><code>containsRecursiveRecord(Schema)</code></a> and it recursively checks
 whether the input schema contains recursive records.</div>
</li>
</ul>
<a name="containsGenericUnion-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsGenericUnion</h4>
<pre>public static&nbsp;boolean&nbsp;containsGenericUnion(org.apache.avro.Schema&nbsp;s)</pre>
<div class="block">determine whether the input schema contains generic unions</div>
</li>
</ul>
<a name="containsGenericUnion-org.apache.avro.Schema-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsGenericUnion</h4>
<pre>protected static&nbsp;boolean&nbsp;containsGenericUnion(org.apache.avro.Schema&nbsp;s,
                                              java.util.Set&lt;org.apache.avro.Schema&gt;&nbsp;visitedRecords)</pre>
<div class="block">Called by <a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html#containsGenericUnion-org.apache.avro.Schema-"><code>containsGenericUnion(Schema)</code></a> and it recursively checks
 whether the input schema contains generic unions.</div>
</li>
</ul>
<a name="isAcceptableUnion-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAcceptableUnion</h4>
<pre>public static&nbsp;boolean&nbsp;isAcceptableUnion(org.apache.avro.Schema&nbsp;in)</pre>
<div class="block">determine whether a union is a nullable union;
 note that this function doesn't check containing
 types of the input union recursively.</div>
</li>
</ul>
<a name="wrapAsTuple-org.apache.pig.ResourceSchema.ResourceFieldSchema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrapAsTuple</h4>
<pre>public static&nbsp;org.apache.pig.ResourceSchema.ResourceFieldSchema&nbsp;wrapAsTuple(org.apache.pig.ResourceSchema.ResourceFieldSchema&nbsp;subFieldSchema)
                                                                     throws java.io.IOException</pre>
<div class="block">wrap a pig schema as tuple</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="isTupleWrapper-org.apache.pig.ResourceSchema.ResourceFieldSchema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTupleWrapper</h4>
<pre>public static&nbsp;boolean&nbsp;isTupleWrapper(org.apache.pig.ResourceSchema.ResourceFieldSchema&nbsp;pigSchema)</pre>
<div class="block">check whether it is just a wrapped tuple</div>
</li>
</ul>
<a name="getAcceptedType-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAcceptedType</h4>
<pre>public static&nbsp;org.apache.avro.Schema&nbsp;getAcceptedType(org.apache.avro.Schema&nbsp;in)</pre>
<div class="block">extract schema from a nullable union</div>
</li>
</ul>
<a name="getSchema-org.apache.hadoop.fs.Path-org.apache.hadoop.fs.FileSystem-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSchema</h4>
<pre>public static&nbsp;org.apache.avro.Schema&nbsp;getSchema(org.apache.hadoop.fs.Path&nbsp;path,
                                               org.apache.hadoop.fs.FileSystem&nbsp;fs)
                                        throws java.io.IOException</pre>
<div class="block">This method is called by <code>#getAvroSchema</code>. The default implementation
 returns the schema of an avro file; or the schema of the last file in a first-level
 directory (it does not contain sub-directories).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - path of a file or first level directory</dd>
<dd><code>fs</code> - file system</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>avro schema</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/pig/piggybank/storage/avro/AvroStorageLog.html" title="class in org.apache.pig.piggybank.storage.avro"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/pig/piggybank/storage/avro/PigAvroDatumReader.html" title="class in org.apache.pig.piggybank.storage.avro"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/pig/piggybank/storage/avro/AvroStorageUtils.html" target="_top">Frames</a></li>
<li><a href="AvroStorageUtils.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
